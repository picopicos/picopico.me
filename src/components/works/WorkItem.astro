---
interface Props {
  title: string
  description: string
  link?: string
  tags?: string[]
}

const { title, description, link, tags = [] } = Astro.props

let githubRepo = null
if (link && link.includes('github.com')) {
  const match = link.match(/github\.com\/([^\/]+\/[^\/]+)/)
  if (match) {
    githubRepo = match[1]
  }
}
---

<li class="flex items-start gap-3 group">
  <div class="mt-1.5 size-2 bg-accent/60 rounded-full flex-shrink-0 group-hover:bg-accent transition-colors"></div>
  <div class="flex-1 min-w-0">
    <div class="flex items-start justify-between gap-3">
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-2 flex-wrap">
          <h4 class="font-medium text-[var(--theme-h1)] group-hover:text-accent transition-colors">
            {link ? (
              <a href={link} target="_blank" rel="noopener noreferrer" class="hover:text-accent">
                {title} â†—
              </a>
            ) : (
              title
            )}
          </h4>
          {githubRepo && (
            <img
              alt="GitHub stars"
              src={`https://img.shields.io/github/stars/${githubRepo}?style=social`}
              class="h-5"
            />
          )}
        </div>
        {description && (
          <p class="text-sm text-foreground/80 mt-1 line-clamp-2">
            {description}
          </p>
        )}
        {tags.length > 0 && (
          <div class="flex flex-wrap gap-1.5 mt-2">
            {tags.map(tag => (
              <span class="text-xs px-2 py-0.5 bg-accent/10 text-accent rounded-full">
                {tag}
              </span>
            ))}
          </div>
        )}
      </div>
    </div>
  </div>
</li>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style> 